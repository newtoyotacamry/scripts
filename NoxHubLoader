local HttpService  = game:GetService("HttpService")
local http_request = (syn and syn.request)
                  or (http and http.request)
                  or request
                  or http_request
if not http_request then
    error("Tampering Detected")
end
local function die(msg)
    if msg then warn("âœ– "..msg) end
    while true do task.wait(9e9) end
end
local function post(bodyTbl)
    local body = HttpService:JSONEncode(bodyTbl)
    local ok, res = pcall(http_request, {
        Url     = "https://roblox-licensing-1.onrender.com/script/activate",
        Method  = "POST",
        Headers = { ["Content-Type"] = "application/json" },
        Body    = body,
    })
    if not ok then
        warn("Tampering Detected", res)
        return nil
    end
    return (res.Body or res)
end
return (function()
    local session = _G._session
    _G._session    = nil
    if type(session) ~= "table"
    or type(session.token) ~= "string"
    or type(session.key)   ~= "string"
    or type(session.hwid)  ~= "string" then
        die("Tampering detected")
    end
    local raw = post({ token = session.token, key = session.key, hwid = session.hwid })
    if not raw then die("Tampering Detected") end

    local resp = HttpService:JSONDecode(raw)
    if resp.status ~= "ok" then
        die("Tampering Detected")
    end

    -- success, run the script
end)()
